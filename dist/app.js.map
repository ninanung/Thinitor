{"version":3,"sources":["webpack://Thinitor/webpack/universalModuleDefinition","webpack://Thinitor/./src/classes/root_element.ts","webpack://Thinitor/./src/classes/text_element.ts","webpack://Thinitor/./src/constants.ts","webpack://Thinitor/./src/index.ts","webpack://Thinitor/./src/modules/element_creator/create_element.ts","webpack://Thinitor/./src/modules/event_listener/root_element_keyboard_event.ts","webpack://Thinitor/./src/modules/event_listener/text_element_keyborad_event.ts","webpack://Thinitor/./src/utils/caret.ts","webpack://Thinitor/./src/utils/common.ts","webpack://Thinitor/./src/utils/error_logs.ts","webpack://Thinitor/webpack/bootstrap","webpack://Thinitor/webpack/startup"],"names":["root","factory","exports","module","define","amd","self","id","classes","element","document","getElementById","this","rootElement","newElement","generateRandomString","appendChild","getElement","listenEnterKeyInTheRoot","listenBackspaceKeyInTheRoot","logError","addNewChild","child","focusedIndex","focusedElement","activeElement","forEach","childClass","index","getElementId","length","focus","insertAfter","splice","removeChild","childElement","previousElementSibling","remove","getRootElement","getClasses","getHtml","innerHTML","RootElement","html","createElement","listenArrowKeyInTheText","TextElement","ERROR_PREFIX","tag","logUndefinedParameter","h1Element","contentEditable","addEventListener","e","key","checkIsChildElement","getCaretPosition","textContent","console","log","getDeferentHtmlString","preventDefault","newElementId","previousChildElement","setCaretToEnd","nextChildElement","nextElementSibling","caretPos","sel","range","window","getSelection","rangeCount","getRangeAt","commonAncestorContainer","parentNode","endOffset","newRange","createRange","selectNodeContents","collapse","selection","removeAllRanges","addRange","text","result","stringArray","indexArray","htmlSplit","split","textSplit","deferentWord","push","characters","i","charAt","Math","floor","random","rootNode","newNode","existingNode","insertBefore","nextSibling","getElementIndex","childIndex","children","parentElement","includes","error","funcName","__webpack_module_cache__","__webpack_require__","moduleId","__webpack_modules__","call"],"mappings":"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","file":"app.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Thinitor\"] = factory();\n\telse\n\t\troot[\"Thinitor\"] = factory();\n})(self, function() {\nreturn ","import { \n    listenEnterKeyInTheRoot,\n    listenBackspaceKeyInTheRoot\n} from '../modules/event_listener/root_element_keyboard_event';\n\nimport { generateRandomString, insertAfter } from '../utils/common';\nimport { logError } from '../utils/error_logs';\n\nimport TextElement from './text_element';\n\nclass RootElement {\n    private readonly rootElement: Element;\n    private element: Element;\n    private classes: Array<TextElement> = [];\n\n    constructor(id: string) {\n        const element = document.getElementById(id);\n        if (!element) logError(`Can't find the element has \"${id}\" id.`);\n        else {\n            this.rootElement = element;\n            this.element = element;\n            const newElement = new TextElement(generateRandomString());\n            this.element.appendChild(newElement.getElement());\n            this.classes = [...this.classes, newElement];\n            listenEnterKeyInTheRoot(this);\n            listenBackspaceKeyInTheRoot(this);\n        }\n    }\n\n    public addNewChild(child: TextElement): void {\n        let focusedIndex: number;\n        const focusedElement = document.activeElement;\n        this.classes.forEach((childClass, index) => {\n            if (childClass.getElementId() === focusedElement.id) focusedIndex = index; \n        });\n        if (focusedIndex + 1 === this.classes.length) {\n            this.element.appendChild(child.getElement());\n            this.classes = [...this.classes, child];\n            document.getElementById(child.getElementId()).focus();\n            return;\n        }\n        insertAfter(this.element, child.getElement(), focusedElement);\n        this.classes.splice(focusedIndex, 0, child);\n        document.getElementById(child.getElementId()).focus();\n        return;\n    }\n\n    public removeChild(childElement: Element): void {\n        let focusedIndex: number;\n        this.classes.forEach((childClass, index) => {\n            if (childClass.getElementId() === childElement.id) focusedIndex = index; \n        });\n        document.getElementById(childElement.previousElementSibling.id).focus();\n        this.classes.splice(focusedIndex, 1);\n        childElement.remove();\n    }\n\n    public getRootElement(): Element {\n        return this.rootElement;\n    }\n\n    public getClasses(): Array<TextElement> {\n        return this.classes;\n    }\n\n    public getHtml(): string {\n        return this.element.innerHTML;\n    }\n\n    public getElement(): Element {\n        return this.element;\n    }\n}\n\nexport default RootElement;","import { createElement } from '../modules/element_creator/create_element';\n\nimport { logError } from '../utils/error_logs';\n\nimport { \n    listenArrowKeyInTheText\n} from '../modules/event_listener/text_element_keyborad_event';\n\nclass TextElement {\n    private id: string;\n    private element: Element;\n\n    constructor(id: string, html = '') {\n        if (!id) logError('Fail to create element, id is missing.');\n        else {\n            this.id = id;\n            this.element = createElement(id, 'p');\n            this.element.innerHTML = html;\n            listenArrowKeyInTheText(this);\n        }\n    }\n\n    public getElement(): Element {\n        return this.element\n    }\n\n    public getElementId(): string {\n        return this.id;\n    }\n}\n\nexport default TextElement;","const ERROR_PREFIX = 'Thinitor Error | ';\n\nexport default {\n    ERROR_PREFIX\n}","import RootElement from './classes/root_element';\nexport default RootElement;","import { logUndefinedParameter } from '../../utils/error_logs';\n\nexport const createElement = (id: string, tag: string): Element => {\n    if (!id || !tag) logUndefinedParameter('createElement');\n    const h1Element = document.createElement(tag);\n    h1Element.contentEditable = 'true';\n    h1Element.id = id;\n    return h1Element\n}","import { \n    generateRandomString,\n    checkIsChildElement\n} from '../../utils/common';\nimport { \n    getCaretPosition, \n    setCaretToEnd, \n    getDeferentHtmlString \n} from '../../utils/caret';\n\nimport RootElement from '../../classes/root_element';\nimport TextElement from '../../classes/text_element';\n\nexport const listenEnterKeyInTheRoot = (root: RootElement): void => {\n    const listenElement = root.getElement();\n    listenElement.addEventListener('keydown', (e: KeyboardEvent) => {\n        if (e.key === 'Enter') {\n            const focusedElement = document.activeElement;\n            // check if the focused element is child of root element\n            if (checkIsChildElement(focusedElement)) {\n                // focus된 부분부터의 innerHTML을 다음줄로 같이 이동시키는 기능 필요\n                // caret위치부터의 innerHTML을 완벽하게 잘라내는 기능이 필요함\n                const caretPosition = getCaretPosition(focusedElement);\n                const htmlText = focusedElement.innerHTML;\n                const commonText = focusedElement.textContent;\n                console.log(getDeferentHtmlString('123<a>rs<h2>45</h2></a>67', '123rs4567'));\n                e.preventDefault();\n                const newElementId = generateRandomString();\n                const newElement = new TextElement(newElementId);\n                root.addNewChild(newElement);\n            }\n        }\n    });\n}\n\nexport const listenBackspaceKeyInTheRoot = (root: RootElement): void => {\n    const listenElement = root.getElement();\n    listenElement.addEventListener('keydown', (e: KeyboardEvent) => {\n        if (e.key === 'Backspace') {\n            const focusedElement = document.activeElement;\n            // check if the focused element is child of root element\n            if (checkIsChildElement(focusedElement)) {\n                // check if child has content and is not first child of root element\n                const previousChildElement = focusedElement.previousElementSibling;\n                if (focusedElement.innerHTML.length < 1 && previousChildElement) {\n                    e.preventDefault();\n                    root.removeChild(focusedElement);\n                    setCaretToEnd(previousChildElement);\n                }\n            }\n        }\n    });\n}","import TextElement from '../../classes/text_element';\nimport { setCaretToEnd } from '../../utils/caret'\n// import { createElement } from '../element_creator/create_element';\n\nexport const listenArrowKeyInTheText = (child: TextElement): void => {\n    const listenElement = child.getElement();\n    listenElement.addEventListener('keydown', (e: KeyboardEvent) => {\n        if (e.key === 'ArrowUp') {\n            const previousChildElement = document.getElementById(child.getElementId()).previousElementSibling\n            if (!previousChildElement) return;\n            e.preventDefault();\n            setCaretToEnd(previousChildElement);\n        }\n        if (e.key === 'ArrowDown') {\n            const nextChildElement = document.getElementById(child.getElementId()).nextElementSibling;\n            if (!nextChildElement) return;\n            e.preventDefault();\n            setCaretToEnd(nextChildElement);\n        }\n    });\n}","export const getCaretPosition = (element: Element): number => {\n    let caretPos = 0;\n    let sel = null;\n    let range = null;\n    if (window.getSelection) {\n        sel = window.getSelection();\n        if (sel.rangeCount) {\n            range = sel.getRangeAt(0);\n            if (range.commonAncestorContainer.parentNode == element) {\n            caretPos = range.endOffset;\n            }\n        }\n    } \n    /* else if (document.selection && document.selection.createRange) {\n        range = document.selection.createRange();\n        if (range.parentElement() == editableDiv) {\n            const tempEl = document.createElement(\"span\");\n            editableDiv.insertBefore(tempEl, editableDiv.firstChild);\n            const  tempRange = range.duplicate();\n            tempRange.moveToElementText(tempEl);\n            tempRange.setEndPoint(\"EndToEnd\", range);\n            caretPos = tempRange.text.length;\n        }\n    } */\n    return caretPos;\n}\n\nexport const setCaretToEnd = (element: Element): void => {\n    const newRange = document.createRange();\n    newRange.selectNodeContents(element);\n    newRange.collapse(false);\n    const selection = window.getSelection();\n    selection.removeAllRanges();\n    selection.addRange(newRange);\n}\n\n// return type of getDeferentHtmlString function\ntype Result = {\n    stringArray: Array<string>,\n    indexArray: Array<number>\n}\n\n// html과 일반 content text의 다른 부분을 찾아서 array형태로 return\nexport const getDeferentHtmlString = (html: string, text: string): Result => {\n    // return value\n    const result: Result = {\n        stringArray: [],\n        indexArray: []\n    }\n    const htmlSplit = html.split('');\n    const textSplit = text.split('');\n    let deferentWord = '';\n    for (let index = 0; index < textSplit.length; index++) {\n        if (htmlSplit[index] !== textSplit[index]) {\n            deferentWord += htmlSplit[index];\n            htmlSplit.splice(index, 1);\n            index -= 1;\n        } else {\n            if (deferentWord) {\n                result.stringArray.push(deferentWord);\n                result.indexArray.push(index);\n                deferentWord = ''\n            }\n        }\n    }\n    return result;\n}","export const generateRandomString = (): string => {\n    const length = 15;\n    let result = '';\n    const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    for (let i = 0; i < length; i++) {\n        result += characters.charAt(Math.floor(Math.random() * characters.length));\n    }\n    return `thinitor_element_${result}`;\n}\n\nexport const insertAfter = (rootNode: Element,newNode: Element, existingNode: Element): void => {\n    rootNode.insertBefore(newNode, existingNode.nextSibling);\n}\n\nexport const getElementIndex = (element: Element, id: string): number => {\n    const children = element.parentElement.children;\n    let childIndex: number;\n    for (let index = 0; index < children.length; index++) {\n        if (children[index].id === id) {\n            childIndex = index;\n            break;\n        }\n    }\n    return childIndex;\n}\n\nexport const checkIsChildElement = (element: Element): boolean => {\n    return element.id.includes('thinitor_element_');\n}","import constants from '../constants';\n\n// return이 없는 함수\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport const logError = (text: string) => {\n    console.error(`${constants.ERROR_PREFIX}${text}`);\n}\n\n// return이 없는 함수\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport const logUndefinedParameter = (funcName: string) => {\n    console.error(`${constants.ERROR_PREFIX}Missing parameter. function: ${funcName}`);\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(607);\n"],"sourceRoot":""}